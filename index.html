<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HolaTube — Bot & Full Platform Demo</title>
  <meta name="description" content="HolaTube — Creator & Affiliate Platform (Demo). Bot support, subscriptions, affiliate, wallet, leaderboard, roadmap, policies."/>
  <!-- Icons / fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    /* ===== Reset & base ===== */
    :root{
      --primary:#1a73e8; --accent:#ff6f00; --muted:#6b7280; --bg:#f5f7fb;
      --card:#ffffff; --danger:#e53935;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial;color:#111;background:var(--bg)}
    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:20px;}

    /* ===== Header ===== */
    header{background:linear-gradient(90deg,var(--primary),#3b82f6);color:white;padding:18px 20px;position:sticky;top:0;z-index:50;box-shadow:0 2px 10px rgba(0,0,0,0.08)}
    header .wrap{display:flex;align-items:center;gap:16px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700;font-size:1.25rem}
    .brand .logo{width:44px;height:44px;border-radius:8px;background:white;color:var(--primary);display:flex;align-items:center;justify-content:center;font-weight:800}
    nav a{margin-left:14px;color:rgba(255,255,255,0.95);font-weight:600}
    .header-actions{display:flex;gap:10px;align-items:center}

    /* ===== Hero ===== */
    .hero{padding:56px 20px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0));margin-bottom:22px;text-align:center}
    .hero h1{font-size:2.2rem;margin-bottom:8px}
    .hero p{color:var(--muted);margin:0 auto 18px;max-width:800px}
    .primary-btn{background:var(--accent);color:white;border:none;padding:12px 18px;border-radius:8px;cursor:pointer;font-weight:700}
    .ghost-btn{background:transparent;border:2px solid rgba(255,255,255,0.12);padding:10px 14px;border-radius:8px;color:white;cursor:pointer}

    /* ===== Grid / cards ===== */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .col-4{grid-column:span 4}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .muted{color:var(--muted);font-size:0.92rem}
    .small{font-size:0.85rem;color:var(--muted)}

    /* ===== Inputs / forms ===== */
    input[type="text"], input[type="number"], select, textarea{
      width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef;font-size:0.95rem;margin-top:8px
    }
    label{font-weight:600;font-size:0.95rem}

    /* ===== sections ===== */
    h2.section-title{margin:0 0 12px;font-size:1.2rem;color:var(--primary)}
    .row{display:flex;gap:12px;flex-wrap:wrap}

    /* ===== Bot widget ===== */
    .bot-btn{position:fixed;right:20px;bottom:20px;background:var(--primary);color:white;width:64px;height:64px;border-radius:50%;box-shadow:0 12px 30px rgba(0,0,0,0.18);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:9999}
    .bot-window{position:fixed;right:20px;bottom:92px;width:360px;max-width:calc(100% - 40px);background:var(--card);border-radius:12px;box-shadow:0 18px 60px rgba(2,6,23,0.18);overflow:hidden;display:none;flex-direction:column;z-index:9999}
    .bot-header{background:linear-gradient(90deg,var(--primary),#3b82f6);color:white;padding:12px 14px;font-weight:700;display:flex;justify-content:space-between;align-items:center}
    .bot-body{padding:12px;height:320px;overflow:auto}
    .bot-input{display:flex;border-top:1px solid #eef2f6}
    .bot-input input{flex:1;padding:10px;border:none}
    .bot-input button{background:var(--accent);color:white;border:none;padding:0 14px;cursor:pointer}

    .msg{margin:6px 0;padding:10px;border-radius:10px;max-width:85%}
    .msg.user{background:#e6f0ff;color:#03204b;margin-left:auto}
    .msg.bot{background:#f1f5f9;color:#0b1221}

    /* ===== small UI ===== */
    .flex{display:flex;gap:10px;align-items:center}
    .right{margin-left:auto}
    .label-pill{background:#f1f5f9;padding:6px 10px;border-radius:999px;font-weight:700;color:var(--primary)}

    /* ===== table leader ===== */
    table{width:100%;border-collapse:collapse}
    table th, table td{padding:10px;border-bottom:1px solid #eef2f6;text-align:left}
    table th{background:#f8fafc;color:var(--muted);font-weight:700}

    /* ===== footer ===== */
    footer{padding:24px 20px;background:#0f1724;color:#cbd5e1;margin-top:30px}

    /* ===== responsive ===== */
    @media(max-width:900px){
      .col-4{grid-column:span 12}
      .col-8{grid-column:span 12}
      .hero h1{font-size:1.5rem}
      .bot-window{right:12px;left:12px;width:auto;bottom:90px}
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="wrap container" style="align-items:center">
      <div class="brand">
        <div class="logo">HT</div>
        <div>
          <div>HolaTube</div>
          <div class="small" style="opacity:0.9">Creators • Affiliate • Wallet</div>
        </div>
      </div>

      <div class="header-actions">
        <nav>
          <a href="#features">Features</a>
          <a href="#dashboard">Dashboard</a>
          <a href="#roadmap">Roadmap</a>
          <a href="#policies">Policies</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1>HolaTube — Grow, Earn & Scale</h1>
      <p class="muted">India + Global creators — discover affiliate income, manage wallet, withdraw, and get instant help from our bot assistant. (Demo mode — connect backend for live payments)</p>
      <div style="margin-top:16px">
        <button class="primary-btn" onclick="document.getElementById('subscription').scrollIntoView({behavior:'smooth'})">Start Free Demo</button>
        <button class="ghost-btn" onclick="document.getElementById('botButton').click()" style="margin-left:10px">Open Bot</button>
      </div>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="container">
    <div class="grid">

      <!-- LEFT: SUBSCRIPTION + AFFILIATE -->
      <div class="col-8">
        <!-- SUBSCRIPTION -->
        <div id="subscription" class="card">
          <h2 class="section-title">Subscription / Membership</h2>
          <p class="muted">Choose a plan — demo will simulate subscription and credit wallet based on plan percentage logic.</p>

          <div class="row" style="margin-top:12px">
            <div style="flex:1">
              <label>Plan</label>
              <select id="planSelect">
                <option value="99" data-tier="basic">Basic — ₹99 (30% platform cut)</option>
                <option value="299" data-tier="premium">Premium — ₹299 (25% platform cut)</option>
              </select>
            </div>
            <div style="width:220px">
              <label>Pay Method (demo)</label>
              <select id="payMethod">
                <option>Instamojo (Demo)</option>
                <option>UPI (Demo)</option>
              </select>
            </div>
          </div>

          <div style="margin-top:12px" class="flex">
            <button class="primary-btn" onclick="doSubscribe()">Subscribe Now</button>
            <div class="small right muted">Subscription status: <span id="subStatus">Not Subscribed</span></div>
          </div>
          <div style="margin-top:12px" class="small muted">Note: In demo mode subscriptions are saved in your browser. Connect backend to accept real payments and webhooks.</div>
        </div>

        <!-- AFFILIATE -->
        <div id="affiliate" class="card" style="margin-top:18px">
          <h2 class="section-title">Affiliate & Referral</h2>
          <p class="muted">Generate shareable links, choose commission %, and track simulated clicks/sales.</p>

          <label>Your name (for ref code)</label>
          <input id="affName" placeholder="Enter username or code (e.g., raju123)">

          <label>Commission share to affiliate</label>
          <select id="commissionSelect">
            <option value="5">5%</option>
            <option value="10" selected>10%</option>
            <option value="15">15%</option>
            <option value="20">20%</option>
          </select>

          <div style="margin-top:12px" class="row">
            <button class="primary-btn" onclick="generateAffiliate()">Generate Link</button>
            <button class="primary-btn" style="background:#10b981" onclick="simulateSale()">Simulate Sale</button>
            <button class="primary-btn" style="background:#6b7280" onclick="copyAffiliateLink()">Copy Link</button>
          </div>

          <div id="affResult" style="margin-top:12px" class="small muted">Your affiliate link will appear here.</div>
        </div>

        <!-- BOT GUIDE & FAQ (Short) -->
        <div class="card" style="margin-top:18px">
          <h2 class="section-title">Bot Guide & FAQ (Examples)</h2>
          <div class="small muted">
            <p><b>Bot can help:</b></p>
            <ul>
              <li>How to subscribe?</li>
              <li>How to generate affiliate link?</li>
              <li>How to request withdraw?</li>
              <li>How to check wallet & transactions?</li>
            </ul>
            <p>Open the bot (bottom-right) and type your question. Bot supports keywords and action buttons for demo actions.</p>
          </div>
        </div>

      </div>

      <!-- RIGHT: DASHBOARD SUMMARY -->
      <div class="col-4">
        <div class="card">
          <h2 class="section-title">Wallet & Quick Actions</h2>
          <p class="muted">Balance, transactions and quick withdraw (demo).</p>

          <div style="margin-top:8px" class="flex">
            <div>
              <div class="small muted">Wallet Balance</div>
              <div style="font-weight:800;font-size:1.4rem">₹<span id="walletBalance">0</span></div>
            </div>
            <div class="right">
              <div class="small muted">User</div>
              <div style="font-weight:700">Guest (demo)</div>
            </div>
          </div>

          <hr style="margin:12px 0;border:none;border-top:1px solid #eef2f6">

          <label>Withdraw Amount (₹)</label>
          <input id="withdrawAmt" type="number" placeholder="Min ₹100">
          <label>Withdraw Mode</label>
          <select id="withdrawMode">
            <option>UPI</option>
            <option>Bank</option>
          </select>
          <div style="margin-top:10px" class="row">
            <button class="primary-btn" onclick="requestWithdraw()">Request Withdraw</button>
            <button class="primary-btn" style="background:#6b7280" onclick="showTransactions()">View Tx</button>
          </div>
        </div>

        <div class="card" style="margin-top:18px">
          <h2 class="section-title">Leaderboard (Demo)</h2>
          <table>
            <thead><tr><th>Rank</th><th>Name</th><th>Earnings</th></tr></thead>
            <tbody id="leaderboardBody">
              <tr><td>1</td><td>Creator A</td><td>₹5000</td></tr>
              <tr><td>2</td><td>Creator B</td><td>₹3500</td></tr>
              <tr><td>3</td><td>Creator C</td><td>₹2000</td></tr>
            </tbody>
          </table>
          <div class="small muted" style="margin-top:8px">Leaderboard updates will be live after backend integration.</div>
        </div>
      </div>

      <!-- FULL-WIDTH: DASHBOARD DETAILS & CHARTS -->
      <div class="col-12 card" style="margin-top:18px">
        <h2 class="section-title">User Dashboard — Transactions & Affiliate Stats</h2>
        <div class="row" style="margin-top:12px">
          <div style="flex:1">
            <h4 class="small">Recent Transactions</h4>
            <div id="txList" class="small muted">No transactions yet.</div>
          </div>
          <div style="width:360px">
            <h4 class="small">Affiliate Performance (Simulated)</h4>
            <div id="affStats" class="small muted">No data yet. Use <b>Simulate Sale</b>.</div>
          </div>
        </div>
      </div>

      <!-- ROADMAP & POLICIES -->
      <div class="col-12" style="margin-top:18px">
        <div class="card">
          <h2 class="section-title">Roadmap — Future Features & Timeline</h2>
          <ol class="small muted">
            <li><b>Phase 1 (Done - demo):</b> Subscription demo, Affiliate demo, Wallet demo, Bot (FAQ & guided), Dashboard placeholders.</li>
            <li><b>Phase 2 (Next):</b> Live Leaderboard, Daily Rewards, Achievement Badges, Email/SMS notifications, Multi-language (EN/HI).</li>
            <li><b>Phase 3:</b> PWA, Push notifications, Auto-renewal payments, Real payment gateway + Instamojo webhook integration.</li>
            <li><b>Phase 4:</b> AI-powered recommendations, Marketplace for creators (courses/templates), White-label APIs, Fraud detection & 2FA.</li>
          </ol>
          <h3 style="margin-top:12px">Update Log / Changelog</h3>
          <ul class="small muted">
            <li><b>v0.1 (Demo)</b> — Core UI + subscription & affiliate demo + bot added.</li>
            <li><b>v0.2</b> — Wallet persistence + simulated withdraw + leaderboard placeholders.</li>
            <li><b>v1.0 (Planned)</b> — Backend connect, real payments, admin panel live.</li>
          </ul>
        </div>

        <div id="policies" class="card" style="margin-top:18px">
          <h2 class="section-title">Guidelines, Policies & Terms (Summary)</h2>
          <div class="small muted">
            <h4>Usage Guidelines</h4>
            <ol>
              <li>Do not use demo balances for real transactions. Connect backend for production.</li>
              <li>Respect other creators; any abusive behavior may result in bans.</li>
              <li>Use genuine affiliate promotions; no spammy or misleading links.</li>
            </ol>

            <h4 style="margin-top:8px">Privacy Policy (Short)</h4>
            <p>HolaTube collects basic user data (email, name), subscription records, affiliate and transaction metadata. For demo mode data is stored locally. In production we will store data securely on our servers and use HTTPS & encryption. Users can request deletion of data via the support channel.</p>

            <h4 style="margin-top:8px">Terms & Conditions (Short)</h4>
            <ol>
              <li>All content and earnings in demo are for demonstration purposes only.</li>
              <li>Payments in real mode will be processed by third-party providers (Instamojo, UPI providers). HolaTube is not liable for third-party delays.</li>
              <li>Withdrawals require admin approval in production to prevent fraud.</li>
              <li>Platform reserves the right to change commission rates with 30 days notice.</li>
            </ol>

            <h4 style="margin-top:8px">Security & Fraud Policy</h4>
            <p>Production systems must use 2FA for withdrawals, rate-limiting on endpoints, and fraud detection mechanisms. Any attempt to manipulate affiliate sales will result in account suspension and possible legal action.</p>

            <p style="margin-top:8px"><b>Full legal policy documents (long-form) should be hosted on separate pages and linked from footer for compliance.</b></p>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- BOT BUTTON & WINDOW -->
  <div id="botButton" class="bot-btn" title="HolaTube Assistant" onclick="toggleBotWindow()"><i class="fas fa-robot" style="font-size:20px"></i></div>

  <div id="botWindow" class="bot-window" role="dialog" aria-label="HolaTube Assistant">
    <div class="bot-header">
      <div>HolaTube Assistant</div>
      <div style="font-size:0.9rem" class="small">Type keywords: subscription, affiliate, wallet, withdraw</div>
    </div>
    <div class="bot-body" id="botBody">
      <div class="msg bot">Hi! I'm HolaTube Assistant. I can guide you step-by-step. Try typing "subscribe" or "generate affiliate".</div>
    </div>
    <div class="bot-input">
      <input id="botText" placeholder="Ask me anything..." onkeydown="if(event.key==='Enter') sendBot()">
      <button onclick="sendBot()">Send</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container" style="display:flex;flex-wrap:wrap;gap:12px;align-items:center">
      <div style="flex:1">
        <strong>HolaTube</strong> — © <span id="yr"></span>. Made with ❤ for creators.
        <div class="small muted">Contact: support@holatube.example (demo)</div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <a href="#" onclick="openTC()">Terms</a>
        <a href="#" onclick="openPrivacy()">Privacy</a>
        <a href="#roadmap">Roadmap</a>
      </div>
    </div>
  </footer>

  <!-- TERMS & PRIVACY MODALS (Simple) -->
  <div id="modalOverlay" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:9998;align-items:center;justify-content:center">
    <div id="modalContent" style="width:90%;max-width:800px;background:white;border-radius:10px;padding:18px;max-height:80vh;overflow:auto"></div>
    <button style="position:fixed;right:20px;top:20px;background:#ef4444;color:white;border:none;padding:10px;border-radius:8px;cursor:pointer" onclick="closeModal()">Close</button>
  </div>

  <script>
    // ====== Utility & Demo persistence ======
    const storageKey = 'holatube_demo_data_v1';
    function loadState(){
      const raw = localStorage.getItem(storageKey);
      return raw ? JSON.parse(raw) : {wallet:0,tx:[],subs:null,aff:{},withdraws:[]};
    }
    function saveState(state){ localStorage.setItem(storageKey, JSON.stringify(state)); }

    let state = loadState();
    document.getElementById('yr').innerText = new Date().getFullYear();
    updateUI();

    // ====== SUBSCRIPTION DEMO ======
    function doSubscribe(){
      const planEl = document.getElementById('planSelect');
      const price = parseInt(planEl.value,10);
      const tier = planEl.options[planEl.selectedIndex].dataset.tier || 'basic';
      // platform cut
      const platformCut = (tier==='premium') ? 0.25 : 0.30;
      // For demo: credit user's wallet with price - platformCut*price (simulate affiliate credited)
      const credit = Math.round(price * (1 - platformCut));
      state.wallet += credit;
      state.tx.push({type:'credit',amount:credit,desc:`Subscribed ${tier} (demo) — credited ₹${credit}`,time:Date.now()});
      state.subs = {tier,price,validTill: Date.now() + 30*24*3600*1000};
      saveState(state);
      updateUI();
      alert(`Subscribed to ${tier} plan. ₹${credit} credited to your wallet (demo).`);
    }

    // ====== AFFILIATE ======
    function generateAffiliate(){
      const name = document.getElementById('affName').value.trim() || 'guest';
      const comm = parseInt(document.getElementById('commissionSelect').value,10);
      const ref = `${name}-${Math.random().toString(36).slice(2,8)}`;
      const link = `${location.origin}${location.pathname}?ref=${encodeURIComponent(ref)}`;
      state.aff[ref] = {owner:name,commission:comm,clicks:0,sales:0};
      saveState(state);
      document.getElementById('affResult').innerHTML = `<b>Link:</b> <a href="${link}" target="_blank">${link}</a> <div class="small muted">Ref code: ${ref} — commission: ${comm}%</div>`;
    }
    function copyAffiliateLink(){
      const el = document.querySelector('#affResult a');
      if(!el){ alert('Generate link first'); return; }
      navigator.clipboard.writeText(el.href).then(()=>alert('Copied link to clipboard'));
    }
    function simulateSale(){
      // take any ref from state.aff, if none create one
      const keys = Object.keys(state.aff);
      if(keys.length===0){ alert('Generate an affiliate first (enter name and click Generate Link)'); return; }
      const ref = keys[Math.floor(Math.random()*keys.length)];
      const info = state.aff[ref];
      // simulate sale price random
      const amount = Math.floor((Math.random()*900)+100); // ₹100-1000
      info.sales += 1;
      info.revenue = (info.revenue||0) + amount;
      // affiliate receives commission percent
      const affiliateShare = Math.round(amount * (info.commission/100));
      state.wallet += affiliateShare;
      state.tx.push({type:'credit',amount:affiliateShare,desc:`Affiliate sale credited (ref ${ref}) ₹${affiliateShare}`,time:Date.now()});
      saveState(state);
      updateUI();
      alert(`Simulated sale ₹${amount}. Affiliate ${info.owner} earned ₹${affiliateShare} (demo).`);
    }

    // ====== WITHDRAW ======
    function requestWithdraw(){
      const amt = parseInt(document.getElementById('withdrawAmt').value,10);
      if(!amt || amt < 100){ alert('Enter amount. Minimum ₹100'); return; }
      if(amt > state.wallet){ alert('Insufficient balance'); return; }
      // create withdraw record (pending)
      const id = 'wd_'+Math.random().toString(36).slice(2,9);
      const rec = {id,amount:amt,mode:document.getElementById('withdrawMode').value,status:'pending',time:Date.now()};
      state.withdraws.push(rec);
      saveState(state);
      updateUI();
      alert('Withdraw request submitted (demo). Admin must approve in production.');
    }

    // Admin approve simulate (simple UI: approve oldest)
    function adminApproveNext(){
      const pend = state.withdraws.find(w=>w.status==='pending');
      if(!pend){ alert('No pending withdraws'); return; }
      pend.status = 'approved';
      // deduct
      state.wallet -= pend.amount;
      state.tx.push({type:'debit',amount:pend.amount,desc:`Withdraw approved (demo) id:${pend.id}`,time:Date.now()});
      saveState(state);
      updateUI();
      alert('Withdraw approved (demo).');
    }

    // ====== TRANSACTIONS & UI ======
    function updateUI(){
      document.getElementById('walletBalance').innerText = state.wallet || 0;
      document.getElementById('subStatus').innerText = state.subs ? `${state.subs.tier} (valid till ${new Date(state.subs.validTill).toLocaleDateString()})` : 'Not Subscribed';
      // tx list
      const txDiv = document.getElementById('txList');
      if(state.tx.length===0) txDiv.innerHTML = '<div class="small muted">No transactions yet.</div>';
      else txDiv.innerHTML = state.tx.slice().reverse().map(t=>`<div style="margin-bottom:6px"><b>${t.type==='credit'?'+':'-'} ₹${t.amount}</b> <div class="small muted">${t.desc} • ${new Date(t.time).toLocaleString()}</div></div>`).join('');
      // aff stats
      const affStats = Object.keys(state.aff).length ? Object.keys(state.aff).map(k=>{ const a = state.aff[k]; return `${a.owner}: ${a.sales||0} sales, ₹${a.revenue||0}`}).join('<br>') : 'No affiliate data yet.';
      document.getElementById('affStats').innerHTML = affStats;
      // tx modal list (for quick view)
      // leaderboard update can be simulated by pushing demo values
      renderLeaderboard();
    }
    function showTransactions(){
      alert((state.tx.length? state.tx.map(t=>`${t.desc} — ₹${t.amount}`).join('\\n') : 'No transactions'));
    }

    // ====== BOT logic (simple keyword-based + actions) ======
    function toggleBotWindow(){ const w = document.getElementById('botWindow'); w.style.display = (w.style.display==='flex') ? 'none' : 'flex'; }
    function sendBot(){
      const txtEl = document.getElementById('botText');
      const val = txtEl.value.trim();
      if(!val) return;
      appendBot('user', val);
      // simple NLP
      const q = val.toLowerCase();
      let resp = "I'm here to help. Try: 'subscribe', 'generate affiliate', 'simulate sale', 'wallet', 'withdraw', 'help'.";
      if(q.includes('subscribe')) resp = "To subscribe: choose a plan in Subscription section and click 'Subscribe Now'. I can also simulate a subscription for you if you want — type 'simulate subscribe'.";
      else if(q.includes('simulate subscribe')){ resp = "Simulating subscription now..."; doSubscribe(); }
      else if(q.includes('affiliate') || q.includes('generate')) resp = "To create an affiliate link: enter your name in Affiliate box and click 'Generate Link'. Or try 'generate link <name>'.";
      else if(q.startsWith('generate link ')){
        const name = val.slice(14).trim(); document.getElementById('affName').value = name; generateAffiliate(); resp = `Generated link for ${name}. Check Affiliate section.`; 
      } else if(q.includes('simulate sale')){ simulateSale(); resp = "Simulated a sale and credited affiliate wallet (demo)."; }
      else if(q.includes('wallet')) resp = `Your wallet balance is ₹${state.wallet}. View Transactions in Dashboard.`;
      else if(q.includes('withdraw')) resp = "To request withdraw: enter amount in Withdraw box and click 'Request Withdraw'. Min ₹100.";
      else if(q.includes('help')) resp = "I can guide you through Subscription, Affiliate link generation, Wallet, Withdraw and Dashboard features. Ask or click action buttons.";
      // quick-action buttons from bot (rendered as message suggestions)
      appendBot('bot', resp, true);
      txtEl.value = '';
    }
    function appendBot(kind, text, withActions=false){
      const body = document.getElementById('botBody');
      const div = document.createElement('div');
      div.className = 'msg ' + (kind==='user' ? 'user' : 'bot');
      div.innerHTML = text;
      body.appendChild(div);
      if(withActions && kind==='bot'){
        const actions = document.createElement('div');
        actions.style.marginTop='6px';
        actions.innerHTML = `
          <button class="primary-btn" style="padding:6px 10px;margin-right:6px" onclick="doSubscribe();appendBot('bot','Subscription simulated via bot (demo).',false)">Simulate Subscribe</button>
          <button class="primary-btn" style="background:#10b981;padding:6px 10px;margin-right:6px" onclick="generateAffiliate();appendBot('bot','Affiliate link created (demo).',false)">Generate Link</button>
          <button class="primary-btn" style="background:#6b7280;padding:6px 10px" onclick="simulateSale();appendBot('bot','Simulated sale credited (demo).',false)">Simulate Sale</button>
        `;
        body.appendChild(actions);
      }
      body.scrollTop = body.scrollHeight;
    }

    // ====== LEADERBOARD (demo update) ======
    function renderLeaderboard(){
      const tbody = document.getElementById('leaderboardBody');
      // keep default items, but add demo user on top if earnings > 0
      let rows = [
        {rank:1,name:'Creator A',earn:5000},
        {rank:2,name:'Creator B',earn:3500},
        {rank:3,name:'Creator C',earn:2000}
      ];
      if(state.wallet > 0){
        rows.unshift({rank:0,name:'You (demo)',earn:state.wallet});
      }
      tbody.innerHTML = rows.map((r,i)=>`<tr><td>${i+1}</td><td>${r.name}</td><td>₹${r.earn}</td></tr>`).join('');
    }

    // ====== MODAL helpers for T&C & Privacy ======
    function openTC(){
      const html = `<h3>Terms & Conditions — HolaTube (Demo)</h3>
      <p class="small muted">Last updated: ${new Date().toLocaleDateString()}</p>
      <ol>
        <li>Demo mode: All demo balances, simulated transactions are for testing only. Do not treat demo balances as real cash.</li>
        <li>Real payments require backend integration and third-party payment processors (Instamojo, UPI, cards).</li>
        <li>Withdrawals in production will require admin approval, KYC checks (if applicable) and OTP verification.</li>
        <li>Users must not attempt fraud. Any suspicious activity may result in account suspension and investigation.</li>
        <li>Platform has right to modify commission structure with prior notification.</li>
      </ol>`;
      showModal(html);
    }
    function openPrivacy(){
      const html = `<h3>Privacy Policy — HolaTube (Demo)</h3>
      <p class="small muted">This is a demo privacy summary. For production, use a full legal privacy policy and implement secure storage, encryption, and user data deletion flows.</p>
      <h4>Data we collect</h4>
      <ul><li>Contact info (email/usernames) — in demo we store locally only</li><li>Transaction metadata & affiliate stats</li></ul>
      <h4>Your rights</h4>
      <ol><li>Request data export</li><li>Request account deletion</li></ol>`;
      showModal(html);
    }
    function showModal(html){
      const overlay = document.getElementById('modalOverlay');
      const content = document.getElementById('modalContent');
      content.innerHTML = html;
      overlay.style.display = 'flex';
    }
    function closeModal(){ document.getElementById('modalOverlay').style.display = 'none'; }

    // ====== Init ======
    updateUI();

    // For demo admin approval action (keyboard shortcut: Ctrl+M open admin panel)
    document.addEventListener('keydown', (e)=>{
      if(e.ctrlKey && e.key.toLowerCase()==='m'){ 
        const approve = confirm('Admin shortcut: Approve next pending withdraw? (Demo)'); 
        if(approve) adminApproveNext();
      }
    });

    // Expose adminApproveNext for manual testing via console
    window.adminApproveNext = adminApproveNext;
  </script>
</body>
</html>
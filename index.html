<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HolaTube ‚Äî Demo</title>
  <meta name="description" content="HolaTube ‚Äî Demo: YouTube-like UI for testing" />
  <style>
    /* ---------- BASIC THEME ---------- */
    :root{
      --bg:#f7f8fb; --card:#fff; --muted:#71727a; --accent:#ff0000;
      --maxW:1200px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#111;background:var(--bg)}
    a{color:inherit;text-decoration:none}

    /* ---------- TOPBAR ---------- */
    .topbar{position:sticky;top:0;z-index:40;background:#fff;border-bottom:1px solid #e8e8eb;display:flex;align-items:center;gap:12px;padding:8px 16px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:18px;color:#111}
    .logo .dot{width:14px;height:14px;background:var(--accent);border-radius:3px;display:inline-block}
    .search{flex:1;display:flex;justify-content:center}
    .search input{width:60%;max-width:640px;padding:8px 12px;border-radius:24px;border:1px solid #e0e0e6;background:#fafafa}
    .actions{display:flex;gap:8px;align-items:center}
    .actions button{padding:8px 10px;border-radius:8px;border:1px solid #e0e0e6;background:#fff;cursor:pointer}

    /* ---------- LAYOUT ---------- */
    .wrap{max-width:var(--maxW);margin:18px auto;display:grid;grid-template-columns:220px 1fr 300px;gap:18px;padding:0 12px}
    @media(max-width:1000px){.wrap{grid-template-columns:1fr;}.rightcol{display:none}.leftcol{display:none}.search input{width:90%}}

    /* ---------- SIDEBAR ---------- */
    .leftcol nav{background:var(--card);padding:12px;border-radius:10px;border:1px solid #eee}
    .leftcol a{display:flex;align-items:center;padding:8px;border-radius:8px;color:#222;margin-bottom:6px}
    .leftcol a:hover{background:#f3f3f6}

    /* ---------- MAIN FEED ---------- */
    .card{background:var(--card);padding:12px;border-radius:10px;border:1px solid #eee}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:560px){.grid{grid-template-columns:1fr}}

    .videoCard{background:#fff;border-radius:8px;overflow:hidden;border:1px solid #f0f0f0}
    .thumb{background:#000;height:180px;display:flex;align-items:center;justify-content:center;color:#fff;position:relative}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{padding:10px}
    .meta h4{margin:0 0 6px 0;font-size:15px}
    .meta p{margin:0;color:var(--muted);font-size:13px}

    /* ---------- SHORTS ---------- */
    .shorts{display:flex;gap:8px;overflow:auto;padding:8px}
    .short{min-width:140px;height:260px;background:#000;border-radius:8px;overflow:hidden;flex:0 0 auto;position:relative}
    .short video{width:100%;height:100%;object-fit:cover;display:block}

    /* ---------- RIGHT COLUMN ---------- */
    .rightcol .card{position:sticky;top:84px}

    /* ---------- PLAYER MODAL ---------- */
    .playerModal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:60}
    .playerBox{width:min(1000px,98%);background:#fff;border-radius:10px;overflow:hidden}
    .playerHead{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-bottom:1px solid #eee}
    .playerBody{background:#000;display:flex;align-items:center;justify-content:center}
    .playerBody video{width:100%;height:auto;max-height:70vh;background:#000;display:block}
    .closeBtn{border:0;background:none;font-size:18px;cursor:pointer}

    /* ---------- UPLOAD FORM small ---------- */
    .uRow{display:flex;gap:8px;align-items:center}
    input[type=file]{padding:6px}

    /* ---------- tiny utilities ---------- */
    .muted{color:var(--muted);font-size:13px}
    .center{text-align:center}
  </style>
</head>
<body>

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="logo"><span class="dot"></span> HolaTube</div>
    <div class="search">
      <input id="searchInput" placeholder="Search" />
    </div>
    <div class="actions">
      <label style="display:flex;align-items:center;gap:8px;cursor:pointer">
        <input id="uploadFile" type="file" accept="video/*" style="display:none"/>
        <button id="btnUpload" title="Upload (local demo)">Upload</button>
      </label>
      <button id="btnSign">Sign in</button>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <div class="wrap">

    <!-- LEFT -->
    <aside class="leftcol">
      <nav class="card">
        <a href="#" onclick="showTab('home')">üè† Home</a>
        <a href="#" onclick="showTab('shorts')">üé¨ Shorts</a>
        <a href="#" onclick="showTab('subscriptions')">üîî Subscriptions</a>
        <hr/>
        <a href="#" onclick="showTab('library')">üìö Library</a>
        <a href="#" onclick="openTerms()">‚öñÔ∏è Terms & Privacy</a>
      </nav>
    </aside>

    <!-- CENTER -->
    <main class="content">

      <!-- UPLOAD UI (local-session demo) -->
      <section class="card" id="uploadCard">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong>Upload (Local demo)</strong><div class="muted">Files will be available in this browser session only</div></div>
          <div class="uRow">
            <input id="videoTitle" placeholder="Title" style="padding:8px;border-radius:6px;border:1px solid #ddd" />
            <button id="addBtn">Add to Feed</button>
          </div>
        </div>
        <div style="margin-top:8px" class="muted">Tip: Use Upload button in top-right or here to choose a file. This demo stores the video in-memory for the session (not permanent).</div>
      </section>

      <!-- FEED -->
      <section class="card" id="home">
        <h3 style="margin-top:0">Recommended</h3>
        <div id="feedGrid" class="grid">
          <!-- video cards injected here -->
        </div>
      </section>

      <!-- SHORTS -->
      <section class="card" id="shorts" style="display:none">
        <h3 style="margin-top:0">Shorts</h3>
        <div id="shortsRow" class="shorts">
          <!-- shorts inserted here -->
        </div>
      </section>

    </main>

    <!-- RIGHT -->
    <aside class="rightcol">
      <div class="card">
        <h4 style="margin:0 0 8px 0">Signed in</h4>
        <div id="userBox" class="muted">Not signed in (demo)</div>
      </div>

      <div class="card">
        <h4 style="margin:0 0 8px 0">Trending</h4>
        <div class="muted">Sample trending list (static)</div>
        <ol style="padding-left:18px;margin-top:8px">
          <li>Hot Video ‚Äî 1M views</li>
          <li>Breaking Shorts</li>
          <li>Music Mix</li>
        </ol>
      </div>
    </aside>
  </div>

  <!-- PLAYER MODAL -->
  <div id="player" class="playerModal" onclick="closePlayer(event)">
    <div class="playerBox" onclick="event.stopPropagation()">
      <div class="playerHead">
        <div><strong id="playerTitle">Title</strong><div class="muted" id="playerOwner"></div></div>
        <button class="closeBtn" onclick="closePlayer()">‚úï</button>
      </div>
      <div class="playerBody">
        <video id="playerVideo" controls></video>
      </div>
    </div>
  </div>

  <!-- TERMS / PRIVACY quick modal -->
  <div id="termsModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;z-index:70">
    <div style="background:#fff;max-width:700px;padding:18px;border-radius:12px;max-height:80vh;overflow:auto">
      <h3>HolaTube Demo ‚Äî Terms & Privacy</h3>
      <p>This is a demo platform for testing UI. Do not upload copyrighted material. There is no monetization in this demo. For real backend, integrate Firebase/Storage/Transcoding and legal pages.</p>
      <button onclick="document.getElementById('termsModal').style.display='none'">Close</button>
    </div>
  </div>

  <script>
    /* -------------------- SAMPLE STARTING DATA -------------------- */
    // A few demo videos (public domain / placeholders). Using small sample MP4 links for demo playback.
    const sampleVideos = [
      { id:'v1', title:'Scenic Nature ‚Äî HolaTube Demo', owner:'Hola Channel', thumb:'https://picsum.photos/640/360?random=1', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4', isShort:false },
      { id:'v2', title:'City Timelapse', owner:'Hola Travels', thumb:'https://picsum.photos/640/360?random=2', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4', isShort:false },
      { id:'s1', title:'Short Clip ‚Äî Waves', owner:'Shorts', thumb:'', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4', isShort:true }
    ];
    let feed = [...sampleVideos]; // runtime feed (in-memory)

    /* -------------------- DOM Refs -------------------- */
    const feedGrid = document.getElementById('feedGrid');
    const shortsRow = document.getElementById('shortsRow');
    const player = document.getElementById('player');
    const playerVideo = document.getElementById('playerVideo');
    const playerTitle = document.getElementById('playerTitle');
    const playerOwner = document.getElementById('playerOwner');
    const uploadFile = document.getElementById('uploadFile');
    const btnUpload = document.getElementById('btnUpload');
    const addBtn = document.getElementById('addBtn');
    const videoTitle = document.getElementById('videoTitle');
    const userBox = document.getElementById('userBox');
    const btnSign = document.getElementById('btnSign');

    /* -------------------- Render functions -------------------- */
    function renderFeed(){
      feedGrid.innerHTML = '';
      feed.filter(v=>!v.isShort).forEach(v=>{
        const card = document.createElement('div'); card.className='videoCard';
        card.innerHTML = `
          <div class="thumb" data-id="${v.id}" style="cursor:pointer">
            ${v.thumb ? `<img src="${v.thumb}" alt="">` : `<div style="padding:20px;color:#fff">No thumbnail</div>`}
          </div>
          <div class="meta">
            <h4>${escape(v.title)}</h4>
            <p class="muted">${escape(v.owner)} ‚Ä¢ 0 views ‚Ä¢ 1 day ago</p>
          </div>`;
        // click to open player
        card.querySelector('.thumb').addEventListener('click',()=>openPlayer(v));
        feedGrid.appendChild(card);
      });
    }
    function renderShorts(){
      shortsRow.innerHTML = '';
      feed.filter(v=>v.isShort).forEach(v=>{
        const s = document.createElement('div'); s.className='short';
        s.innerHTML = `<video src="${v.src}" muted playsinline loop></video>`;
        s.addEventListener('click',()=>openPlayer(v));
        shortsRow.appendChild(s);
        // autoplay preview (muted)
        const vid = s.querySelector('video');
        vid.addEventListener('mouseenter',()=>vid.play());
        vid.addEventListener('mouseleave',()=>vid.pause());
      });
    }

    /* -------------------- Player -------------------- */
    function openPlayer(video){
      player.style.display='flex';
      playerVideo.src = video.src;
      playerVideo.play().catch(()=>{});
      playerTitle.textContent = video.title;
      playerOwner.textContent = video.owner || 'HolaTube';
    }
    function closePlayer(e){
      if(e && e.target && e.target.id==='player') { /* clicked overlay */ }
      player.style.display='none';
      playerVideo.pause();
      playerVideo.src = '';
    }

    /* -------------------- Upload (local/session) -------------------- */
    // Top-right upload button triggers file input
    btnUpload.addEventListener('click',()=> uploadFile.click());
    uploadFile.addEventListener('change', handleFileSelect);

    function handleFileSelect(e){
      const file = e.target.files[0];
      if(!file) return;
      if(!file.type.startsWith('video/')) { alert('Select a video file'); return; }
      // Create object URL for session playback
      const url = URL.createObjectURL(file);
      // create new video object in feed
      const id = 'u' + Date.now();
      const title = videoTitle.value.trim() || file.name;
      const owner = 'You (local)';
      // Ask user if it's a short
      const isShort = confirm('Mark as SHORT? (OK = yes)');
      feed.unshift({id, title, owner, thumb:'', src:url, isShort});
      renderFeed(); renderShorts();
      // clear file input UI
      videoTitle.value = '';
      uploadFile.value = '';
      alert('Video added to feed for this session. It will not persist after refresh.');
    }

    // Also support addBtn: opens file picker
    addBtn.addEventListener('click',()=> uploadFile.click());

    /* -------------------- Tabs / Search -------------------- */
    function showTab(name){
      if(name==='shorts'){
        document.getElementById('home').style.display='none';
        document.getElementById('shorts').style.display='block';
      } else {
        document.getElementById('home').style.display='block';
        document.getElementById('shorts').style.display='none';
      }
    }

    document.getElementById('searchInput').addEventListener('input', (e)=>{
      const q = e.target.value.toLowerCase().trim();
      if(!q){ renderFeed(); renderShorts(); return; }
      const filtered = feed.filter(v => (v.title||'').toLowerCase().includes(q) || (v.owner||'').toLowerCase().includes(q));
      // render filtered into grid
      feedGrid.innerHTML = '';
      filtered.filter(v=>!v.isShort).forEach(v=>{
        const card = document.createElement('div'); card.className='videoCard';
        card.innerHTML = `<div class="thumb" data-id="${v.id}" style="cursor:pointer">${v.thumb?`<img src="${v.thumb}">`:`<div style="padding:20px;color:#fff">No thumbnail</div>`}</div>
          <div class="meta"><h4>${escape(v.title)}</h4><p class="muted">${escape(v.owner)}</p></div>`;
        card.querySelector('.thumb').addEventListener('click',()=>openPlayer(v));
        feedGrid.appendChild(card);
      });
    });

    /* -------------------- Terms modal -------------------- */
    function openTerms(){ document.getElementById('termsModal').style.display='flex' }

    /* -------------------- Sign (demo) -------------------- */
    btnSign.addEventListener('click', ()=>{
      // Demo sign behavior: ask name and show
      const name = prompt('Sign in (demo): Enter your name');
      if(name){
        userBox.textContent = name;
        btnSign.textContent = 'Sign out';
        btnSign.onclick = ()=> { userBox.textContent = 'Not signed in (demo)'; btnSign.textContent='Sign in'; location.reload(); };
      }
    });

    /* -------------------- Helpers -------------------- */
    function escape(s){ return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) }

    // initial render
    renderFeed();
    renderShorts();

    /* ---------- NOTES for future (Firebase integration) ----------
      - Replace local upload handler with Firebase Storage upload (get downloadURL)
      - Save metadata (title, owner, url, isShort, createdAt, likes, views) to Firestore collection 'videos'
      - Use Firestore queries to load feed & real-time updates
      - Use Cloud Functions to generate thumbnails & transcode for mobile/streaming
      - Add auth using Firebase Auth (Google)
    -------------------------------------------------------------- */
  </script>
</body>
</html>
